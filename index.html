<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="aspect.css">
 <title> Ti codifico il mondo! </title>

</head>

<body>
<div class="container-fluid" id="topContainer">
    <div class="row" id="firstRaw">
     <div class="col-sm-12">
       <nav class="navbar fixed-top bg-dark navbar-dark navbar-expand-sm justify-content-center"> <!--BLACK NAVBAR-->
       <span style="text-allign=center"><a class="navbar-brand" href="#">Ti codifico il mondo, madafacca!</a></nav>
    </div></div>
  </div>

  <div class="container-fluid" id="secondContainer">
    <div class="row" id="firstsRowSecCont">
 <div class="col-sm-12">
   <nav class="navbar fixed-top navbar-expand-md navbar-light bg-light ml-auto" id="expandibleNavB"
       style="margin-top:50px"> <!-- Expandable Navbar -->
  <!-- not this navbar
   <a class="navbar-brand" href="#">Navbaaaaar</a> -->
     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
       <span class="navbar-toggler-icon"></span>
     </button>
     <div class="collapse navbar-collapse" id="navbarNavDropdown">
       <ul class="navbar-nav ml-auto">
         <li class="nav-item dropdown">
           <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
             ENG
           </a>
           <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
             <a class="dropdown-item" href="#">IT</a>
             <a class="dropdown-item" href="#">DEU</a>
             <a class="dropdown-item" href="#">FRA</a>
             <li class="nav-item dropdown">
               <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="navbarDropdownMenuLink"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                 USD
               </a>
               <div class="dropdown-menu"  aria-labelledby="navbarDropdownMenuLink">
                 <a class="dropdown-item" href="#">EUR</a>
                 <a class="dropdown-item" href="#">CNY</a>
                 <a class="dropdown-item" href="#">BTC</a>
         <li class="nav-item">
           <a class="nav-link" href="#">Login <span class="sr-only">(current)</span></a>
         </li>
         <li class="nav-item">
           <a class="nav-link" href="#">Register</a>
         </li>
         <li class="nav-item">
           <a class="nav-link" href="#">Pricing</a>
         </li>

           </div>
         </li>
       </ul>
     </div>
   </nav>
    </div>
  </div>
</div>

<div class="container-fluid" id="thirdContainer">
    <div class="row" id="thirdContFirstRow">
<div class=col-sm-12>

  <nav id= "expNavB" class= "navbar fixed-top navbar-expand-lg navbar-light" style="background-color: #ffffff;"><!--terza NAVBAR-->
    <a class="navbar-brand" href="#"><img src="https://i.ibb.co/dDbkhRV/Coin-Fishers.png"
      width="60" height="60" alt="logo">CoinFisherz</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
      aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Markets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Defi</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Exchange</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">News</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Tools</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Learn</a>
        </li>
      </ul>
      <span class="navbar-text">
        Took the rod? =>
      </span>

      <form class="form-inline">
   <input class="form-control mr-sm-2" type="search" placeholder="Search, and " aria-label="Took the rod?">
   <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Fish!</button>
 </form>

    </div>
  </nav>
</div>
  </div></div>

<hr>

<div class="container-fluid" id="anotherContainer1">


    <div class="row">
      <div class="col-sm-12">
        <table class="table" class="table-responsive{-sm|-md|-lg|-xl} table-hover">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Coin</th>
              <th scope="col">Price</th>
              <th scope="col">1h Change</th>
              <th scope="col">1d Change</th>
              <th scope="col">1w Change</th>
              <th scope="col">1d Vol</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>
<img class="coinIcon" alt="bitcoin (BTC)" data-src="https://assets.coingecko.com/coins/images/1/thumb/bitcoin.png?1547033579"
data-srcset="https://assets.coingecko.com/coins/images/1/thumb_2x/bitcoin.png?1547033579 2x"
src="https://assets.coingecko.com/coins/images/1/thumb/bitcoin.png?1547033579"
srcset="https://assets.coingecko.com/coins/images/1/thumb_2x/bitcoin.png?1547033579 2x">
                Bitcoin</td>
              <td style="color:blue" id="price"><b> </<b></td>
              <td>10 %</td>
              <td id="btcChangeToday"> %</td>
              <td>1000 %</td>
            </tr>
            <tr>
              <th scope="row">2</th>

              <td><img class="coinIcon" alt="ethereum (ETH)" data-src="https://assets.coingecko.com/coins/images/279/thumb/ethereum.png?1595348880"
              data-srcset="https://assets.coingecko.com/coins/images/279/thumb_2x/ethereum.png?1595348880 2x" src=
              "https://assets.coingecko.com/coins/images/279/thumb/ethereum.png?1595348880" srcset=
              "https://assets.coingecko.com/coins/images/279/thumb_2x/ethereum.png?1595348880 2x">Ethereum</td>
              <td>320</td>
              <td>2 %</td>
                <td>16 %</td>
                  <td>32 %</td>
                    <td>1000012</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>
<img class="" alt="xrp (XRP)" data-src="https://assets.coingecko.com/coins/images/44/thumb/xrp.png?1564480400"
data-srcset="https://assets.coingecko.com/coins/images/44/thumb_2x/xrp.png?1564480400 2x"
src="https://assets.coingecko.com/coins/images/44/thumb/xrp.png?1564480400"
srcset="https://assets.coingecko.com/coins/images/44/thumb_2x/xrp.png?1564480400 2x">
                Ripple</td>
              <td>0,25</td>
                <td>-3 %</td>
                  <td>-32 %</td>
                    <td>-39 %</td>
                      <td>9999999999</td>
            </tr>
          </tbody>
        </table>


<div class="container-fluid" id="anotherContainer2">


    <div class="row">
      <div class="col-sm-12">

        <h1> <b>Ready, set, go!!</b></h1>
      <div class="container-fluid">
      <h2>This is inside a fluid container!</h2>
      <div class="row">
        <h2>This is inside a normal row!</h2>
        <div class="col-sm-6">
        <h2>  This is a col-sm-6</h2>
      </div>
      </div>
      </div>
      <h2 id="Text1"> Actual Price: </h2>
      <h1  style="color:blue" id="price1"><b> </<b></h1>
      <br>
      <hr>
      <br>
      <h2 id="Text2"> Market cap </h2>
      <h2 id="markCap"> </h2>
      <br>
      <hr>
      <br>
      <h2 id="Text3"> Last Week's Market Cap </h2>
      <h2 id="lastWeekMarkCap"> </h2>
      <br>

  </div>

</div></div>



<script>


let BASE_URL = "https://api.coingecko.com/api/v3";
let BITCOIN_PRICE_ENDPOINT ="/simple/price?ids=bitcoin&vs_currencies=usd";
let COINS_ENDPOINT = "/coins/list";
let GLOBAL_ENDPOINT ="/coins/markets?vs_currency=usd&ids=bitcoin&order=market_cap_desc&per_page=100&page=1&sparkline=false";
let BITCOIN_MARKET_CAP_ENDPOINT = "/coins/markets?vs_currency=usd&ids=bitcoin&order=market_cap_desc&per_page=100&page=1&sparkline=false";
let BITCOIN_LASTWEEK_ENDPOINT = "/coins/bitcoin/market_chart?vs_currency=usd&days=7";
let BITCOIN_CHANGE_TODAY_ENDPOINT = "/coins/markets?vs_currency=usd&ids=bitcoin&order=market_cap_desc&per_page=100&page=1&sparkline=true&price_change_percentage=24h";


let bitcoinPriceUrl = BASE_URL + BITCOIN_PRICE_ENDPOINT;
let allCoinsUrl = BASE_URL + COINS_ENDPOINT;
let globalUrl = BASE_URL + GLOBAL_ENDPOINT;
let btcLastWeekMarketCapUrl = BASE_URL + BITCOIN_LASTWEEK_ENDPOINT;
let currentMarketCapUrl = BASE_URL + BITCOIN_MARKET_CAP_ENDPOINT;
let btcChangeTodayUrl = BASE_URL + BITCOIN_CHANGE_TODAY_ENDPOINT

var bitcoinValue;
var btcChangeOneH;
var marketCap;
var lastMarketCap;
var btcChangeToday;

DoWriteValueAfterCheck();

async function DoWriteValueAfterCheck() {

  await getBitcoinPrice();
  await getMarketCap();// getMarketCap();
  await getLastMarketCap();//getLastMarketCap();
  await getBitcoinChange24h();
  console.log("Pagevalues: " + bitcoinValue + " " +marketCap  +" "+ lastMarketCap);

  var el = document.getElementById('price');
  if (lastMarketCap<marketCap)
  {
      el.style.color = "green";
  }
  else
  {
    el.style.color = "red";
  }

 $("#price").html(bitcoinValue);
 $("#price1").html(bitcoinValue);
  $("#markCap").html(marketCap);
 $("#lastWeekMarkCap").html(lastMarketCap);
 $("#btcChangeToday").html(btcChangeToday)
}


async function getBitcoinPrice() {

  await fetch (bitcoinPriceUrl)
    .then(res => res.json())
    .then(data => {

      var convertedNumber = Math.round(parseInt(data.bitcoin.usd));
      bitcoinValue = convertedNumber;
      console.log(convertedNumber)
    //  return convertedNumber ;
    })
}

async function getMarketCap() {

  await fetch (currentMarketCapUrl)
    .then(res => res.json())
    .then(data => {

      var convertedNumber = Math.round(parseInt(data[0].market_cap));
      marketCap = convertedNumber;
      console.log(data[0].market_cap)
      return convertedNumber ;
    })
 }
 async function getBitcoinChange24h() {

   await fetch (btcChangeTodayUrl)
     .then(res => res.json())
     .then(data => {

       var convertedNumber = Math.round((data[0].price_change_percentage_24h_in_currency) * 100) / 100;
       btcChangeToday = convertedNumber;
       console.log(data[0].price_change_percentage_24h_in_currency)
       return convertedNumber ;
     })
  }

 async function getLastMarketCap(){

  await fetch (btcLastWeekMarketCapUrl)
    .then(res => res.json())
    .then(data => {

      var convertedNumber = Math.round(parseInt(data.market_caps[167][1]));
      console.log(data.market_caps[167][1]);
      lastMarketCap = convertedNumber;
      console.log(lastMarketCap)
      return lastMarketCap ;
    })
}

//API







</script>
</body>



</html>
